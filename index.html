<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<link rel="manifest" href="./manifest.json">

<meta name="theme-color" content="#2e7d32">

<title>ê²½ê¸°ìš´ì˜ Ver.1.5</title>

<style>
/* ===============================
   ê³µí†µ ë³€ìˆ˜ ë° ê¸°ë³¸ ìŠ¤íƒ€ì¼
   =============================== */
:root{--primary:#2b8f2b;--muted:#666;--bg:#f6f7f9;--card:#fff}
*{box-sizing:border-box}
body{margin:0;padding:12px;font-family:system-ui,-apple-system,"Noto Sans KR",Roboto,Arial;background:var(--bg);color:#111}

/* ===============================
   ë ˆì´ì•„ì›ƒ ë° ì¹´ë“œ UI
   =============================== */
.container{max-width:520px;margin:0 auto}
.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.title{font-size:18px;font-weight:800}
.madeby{font-size:13px;color:var(--muted)}
.card{background:var(--card);padding:12px;border-radius:12px;margin-bottom:12px;box-shadow:0 4px 12px rgba(0,0,0,.04);border:1px solid rgba(15,23,42,0.03)}
.h2{font-size:15px;margin:0 0 8px}
.row{display:flex;gap:8px;align-items:center}
.col{flex:1}

/* ===============================
   ì…ë ¥ ìš”ì†Œ ë° ë²„íŠ¼ ìŠ¤íƒ€ì¼
   =============================== */
input[type="text"], input[type="number"], select, textarea {padding:8px;border:1px solid #e6eef3;border-radius:8px;font-size:15px;width:100%}
.btn{background:var(--primary);color:#fff;border:none;border-radius:10px;padding:8px 10px;font-weight:700;cursor:pointer}
.btn.ghost{background:transparent;color:var(--primary);border:1px solid var(--primary)}
.small{padding:6px 8px;font-size:13px}

/* ===============================
   í…Œì´ë¸” ê³µí†µ ìŠ¤íƒ€ì¼
   =============================== */
.table{width:100%;border-collapse:collapse;margin-top:8px}
th,td{padding:8px;text-align:center;border-bottom:1px solid #eef3f8;font-size:14px;vertical-align:middle}
.notice{font-size:13px;color:var(--muted)}
@media (max-width:520px){.row{flex-direction:row;flex-wrap:wrap;align-items:center}}
.checkbox-cell{width:36px;text-align:center}
.action-cell{width:100px}
.name-cell{text-align:left;padding-left:8px;min-width:140px}
.name-input{width:100%;border-radius:6px;padding:6px;border:1px solid #e6eef3}
.group-box{border:1px solid #eef3f8;padding:8px;border-radius:8px;margin-bottom:8px}
.gender-cell{display:flex;align-items:center;justify-content:center;gap:6px}
.gender-cell select{
  min-width:80px;
}

/* ===============================
   íšŒì› ëª…ë¶€ í…Œì´ë¸” ìŠ¤íƒ€ì¼
   =============================== */
#memberTable td{
  vertical-align: middle;
}

.name-input{
  height:38px;
}

.gender-cell select{
  height:38px;
}

.action-cell button{
  min-width:56px;          /* ë„ˆë¬´ ì¢ì•„ì§€ì§€ ì•Šê²Œ */
  height:38px;
  white-space: nowrap;     /* ê¸€ì ì¤„ë°”ê¿ˆ ê¸ˆì§€ */
  writing-mode: horizontal-tb; /* ì„¸ë¡œ ê¸€ì ë°©ì§€ */
  padding: 0 10px;
}



/* íšŒì› ì¶”ê°€ ì¤„: ë†’ì´ í†µì¼ */
#inputName,
#inputGender,
#memberSection .btn{
  height:44px;
  line-height:44px;
  padding-top:0;
  padding-bottom:0;
}

/* [ì¡°í¸ì„±] ë°©ì‹ ê°€ë¡œ ì •ë ¬ */
.mode-row{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:8px;
}

.mode-label{
  white-space:nowrap;
}

.mode-select{
  width:110px;
}

/* [íšŒì›ëª…ë¶€] ì„±ë³„ ê°€ë¡œ í‘œì‹œ */
th{
  writing-mode: horizontal-tb;
  white-space:nowrap;
}

/* ê³µí†µ ì…ë ¥ìš”ì†Œ ë†’ì´ í†µì¼ */
input[type="text"],
input[type="number"],
select,
button{
  height:40px;
  line-height:40px;
}

/* ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì •ëˆ */
.btn{
  font-size:14px;
  letter-spacing:-0.2px;
}

.btn.ghost{
  background:#fff;
}

/* ì¹´ë“œ ê°„ê²© ì•½ê°„ ì—¬ìœ  */
.card{
  margin-bottom:14px;
}

/* ì„¹ì…˜ ì œëª© ê°•ì¡° */
.h2{
  font-size:16px;
  font-weight:800;
  border-left:4px solid var(--primary);
  padding-left:8px;
}

/* í‘œ í—¤ë” ì •ë¦¬ */
.table th{
  background:#f2f4f7;
  font-weight:700;
}

/* í‘œ í–‰ hover */
.table tbody tr:hover{
  background:#f8fafc;
}

/* ì´ë¦„ ì…ë ¥ì¹¸ ê°€ë…ì„± */
.name-input{
  font-size:14px;
}

/* ì„±ë³„ ì…€ ì¤‘ì•™ ê³ ì • */
.gender-cell{
  justify-content:center;
}

/* ì‚­ì œ ë²„íŠ¼ ì •ë¦¬ */
.action-cell button{
  border-radius:8px;
}

/* ì¡°í¸ì„± ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ ì •ë¦¬ */
.group-box ul{
  margin:6px 0 0;
}

.group-box li{
  margin-bottom:4px;
}

/* íƒ€ìˆ˜ ì…ë ¥ ì¤„ ê°„ê²© */
#scoreInputs .group-box > div{
  margin-bottom:6px;
}

/* ===============================
   ìˆœìœ„í‘œ ì˜ì—­ ìŠ¤íƒ€ì¼
   =============================== */

/* ìˆœìœ„í‘œ í…Œì´ë¸” */
#rankingArea table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}

#rankingArea th,
#rankingArea td{
  border-bottom:1px solid #eaeef3;
  padding:6px;
}

/* ìˆœìœ„í‘œ ì´ë¦„ ì™¼ìª½ ì •ë ¬ */
#rankingArea td:nth-child(2){
  text-align:left;
  padding-left:8px;
}

/* ===============================
   ëª¨ë°”ì¼ ëŒ€ì‘
   =============================== */
@media (max-width:420px){
  .row{
    gap:6px;
  }
  .btn{
    padding:0 8px;
    font-size:13px;
  }
}

/* ìƒ‰ìƒ í†¤ ì—…ê·¸ë ˆì´ë“œ */
:root{
  --primary:#237a23;        /* ì¡°ê¸ˆ ë” ì°¨ë¶„í•œ ë…¹ìƒ‰ */
  --primary-soft:#e9f4ea;   /* ì—°í•œ í¬ì¸íŠ¸ ë°°ê²½ */
}

/* ì£¼ìš” ë²„íŠ¼ ê°•ì¡° */
.btn{
  box-shadow:0 2px 6px rgba(0,0,0,.08);
}

.btn:active{
  transform:translateY(1px);
}

/* ë³´ì¡° ë²„íŠ¼ì€ ì‹œê°ì  ë¬´ê²Œ ê°ì†Œ */
.btn.ghost{
  color:#237a23;
  border-color:#cfe6d1;
}

/* ==============================
   íšŒì› ì´ë¦„ ì…ë ¥ë€ ê°€ë…ì„± ê°•í™”
   ============================== */

.name-input{
  background:#fff;
  border:1.5px solid #d6e2da;
  font-size:15px;
  font-weight:600;
  color:#111;
  letter-spacing:-0.2px;
}

.name-input::placeholder{
  color:#9aa5a0;
  font-weight:500;
}

/* í¬ì»¤ìŠ¤ ì‹œ í™•ì‹¤í•œ ê°•ì¡° */
.name-input:focus{
  outline:none;
  border-color:var(--primary);
  background:var(--primary-soft);
  box-shadow:0 0 0 3px rgba(35,122,35,.15);
}

/* íšŒì› ì¶”ê°€ ì…ë ¥ ì¤„ ì „ì²´ ì •ë¦¬ */
#memberSection .row input,
#memberSection .row select{
  transition:all .15s ease;
}

/* ì´ë¦„ ì…€ ì•ˆ ì…ë ¥ì¹¸ ì¢Œìš° ì—¬ë°± í™•ë³´ */
.name-cell{
  padding-left:6px;
  padding-right:6px;
}

/* í‘œ ì•ˆì—ì„œë„ ì´ë¦„ ì…ë ¥ì´ íŠ€ì§€ ì•Šê²Œ */
#memberTable .name-input{
  background:#fdfefe;
}

/* ì „ì²´ í°íŠ¸ ë Œë”ë§ ì•ˆì •í™” */
body{
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* ì¹´ë“œ ë‚´ë¶€ ì—¬ë°± ê· í˜• */
.card{
  padding:14px 14px 16px;
}

/* ì„¹ì…˜ ì œëª©ê³¼ ë‚´ìš© ê°„ ê°„ê²© */
.h2{
  margin-bottom:10px;
}

/* ì…ë ¥ + ë²„íŠ¼ í–‰ ì •ëˆ */
.row{
  margin-bottom:6px;
}

/* input, select ì‹œê°ì  í†µì¼ */
input[type="text"],
input[type="number"],
select{
  background:#fff;
  border-color:#dfe7e2;
}

input[type="text"]:hover,
input[type="number"]:hover,
select:hover{
  border-color:#bcd7c2;
}

/* ë²„íŠ¼ ëˆŒë¦¼ í”¼ë“œë°± ê°•í™” */
.btn{
  transition:background .15s ease, transform .08s ease, box-shadow .15s ease;
}

.btn:hover{
  filter:brightness(1.03);
}

.btn:active{
  transform:translateY(1px);
  box-shadow:0 1px 3px rgba(0,0,0,.12) inset;
}

/* ghost ë²„íŠ¼ ê³ ê¸‰í™” */
.btn.ghost{
  background:#fff;
}

.btn.ghost:hover{
  background:#f1f7f2;
}

/* í…Œì´ë¸” í–‰ ë†’ì´ ì•ˆì • */
.table td,
.table th{
  height:44px;
}

/* ì²´í¬ë°•ìŠ¤ ì •ë ¬ ì•ˆì • */
.checkbox-cell input{
  transform:scale(1.05);
}

/* ê·¸ë£¹ ë°•ìŠ¤ ê°„ ì—¬ë°± */
.group-box{
  background:#fbfcfb;
}

/* ê·¸ë£¹ ì œëª© ê°•ì¡° */
.group-box > div:first-child{
  font-size:14px;
  margin-bottom:4px;
}

/* íƒ€ìˆ˜ ì…ë ¥ì¹¸ ì‹œê° ê°•ì¡° */
#scoreInputs input[type="number"]{
  background:#fff;
  font-weight:600;
}

/* ìˆœìœ„í‘œ ì œëª© í†µì¼ */
#rankingArea h3{
  font-size:15px;
  margin-top:12px;
}

/* ìˆœìœ„í‘œ í…Œì´ë¸” í–‰ ê°•ì¡° */
#rankingArea tbody tr:hover{
  background:#f4f7f9;
}

/* ëª¨ë°”ì¼ì—ì„œ ì¹´ë“œ ê°„ ê°„ê²© */
@media (max-width:420px){
  .card{
    padding:12px;
  }
}

/* í…Œì´ë¸” ì „ì²´ í­ ì œí•œ */
#memberTable{
  width:100%;
  table-layout:fixed;
}

/* í…Œì´ë¸” ì»¬ëŸ¼ í­ ì§€ì • */
#memberTable .checkbox-cell{
  width:40px;
}

#memberTable .name-cell{
  width:auto;
}

#memberTable th:nth-child(3){
  width:80px;
}

#memberTable .action-cell{
  width:80px;
}

/* í…Œì´ë¸” ë‚´ë¶€ ìš”ì†Œ í¬ê¸° ì œí•œ */
#memberTable .name-input{
  height:36px;
  padding:6px 8px;
  font-size:14px;
  box-sizing:border-box;
  width:100%;
}

#memberTable .gender-cell select{
  height:36px;
  padding:6px 8px;
  box-sizing:border-box;
  font-size:14px;
}

#memberTable .action-cell button{
  height:36px;
  padding:0;
  box-sizing:border-box;
  font-size:14px;
  line-height:36px;
  width:100%;
}

/* í…Œì´ë¸” ì…€ ë†’ì´ ê³ ì • */
#memberTable td{
  height:48px;
  vertical-align:middle;
  padding:6px;
}

#memberTable th{
  height:40px;
  vertical-align:middle;
  padding:8px 6px;
  font-size:14px;
}

</style>

</head>

<body>
<div class="container">
  <div class="header">
    <div class="title">ê²½ê¸°ìš´ì˜ Ver.1.5</div>
    <div class="madeby">Developed by S. D. Kwon</div>
  </div>

  <!-- 1) ê·¸ë£¹ ë° íšŒì›ê´€ë¦¬ -->
  <section class="card" id="memberSection">
    <div class="h2">1) ê·¸ë£¹ ë° íšŒì›ê´€ë¦¬</div>

    <div class="row" style="margin-bottom:8px">
      <select id="clubSelect" style="width:100%" onchange="onSelectClub()"></select>
    </div>

    <div class="row" style="margin-bottom:10px">
      <button class="btn ghost col" onclick="deleteClub()">ê·¸ë£¹ ì‚­ì œ</button>
      <button class="btn ghost col" onclick="resetCurrentClub()">ê·¸ë£¹ ì´ˆê¸°í™”</button>
    </div>

    <div class="row" style="margin-bottom:8px">
      <input id="inputName" class="name-input" style="max-width:160px" placeholder="íšŒì› ì´ë¦„"/>
      <select id="inputGender" style="width:90px">
        <option value="ë‚¨">ë‚¨</option>
        <option value="ì—¬">ì—¬</option>
      </select>
      <button class="btn" style="max-width:84px" onclick="addMember()">ì¶”ê°€</button>
    </div>

    <div class="row" style="justify-content:space-between;margin-bottom:8px">
      <div style="display:flex;gap:8px;align-items:center">
        <input id="selectAll" type="checkbox" onchange="toggleSelectAll(this.checked)"/>
        <label class="notice">ì „ì²´ì„ íƒ</label>
        <button class="btn small ghost" onclick="deleteSelected()">ì„ íƒì‚­ì œ</button>
      </div>
      <div style="display:flex;gap:12px;align-items:center">
        <div class="notice">íšŒì›ìˆ˜: <b id="totalCount">0</b></div>
        <div class="notice">ë‚¨: <b id="maleCount">0</b></div>
        <div class="notice">ì—¬: <b id="femaleCount">0</b></div>
      </div>
    </div>

    <table class="table" id="memberTable">
      <thead>
        <tr>
          <th class="checkbox-cell"></th>
          <th class="name-cell">ì´ë¦„</th>
          <th>ì„±ë³„</th>
          <th class="action-cell">ì‚­ì œ</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- 2) ì¡°í¸ì„± -->
  <section class="card" id="groupSection">
    <div class="h2">2) ì¡°í¸ì„±</div>

<div style="display:flex;justify-content:flex-end;gap:12px;margin-bottom:8px">
  <div class="notice">ì„ íƒ ì¸ì›: <b id="selCount">0</b></div>
  <div class="notice">ë‚¨: <b id="selMale">0</b></div>
  <div class="notice">ì—¬: <b id="selFemale">0</b></div>
</div>




    <div class="row" style="margin-bottom:8px;justify-content:space-between">
      <div style="flex:1">
        <label>ì¡°ë³„ì¸ì›</label>
        <input id="groupSize" type="number" value="4" style="max-width:80px">
      </div>
<div style="flex:1">
<div class="mode-row">
  <span class="mode-label">ë°©ì‹</span>
  <select id="mode" class="mode-select">
    <option value="mixed">í˜¼ì„±</option>
    <option value="byGender">ì„±ë³„</option>
    <option value="random">ë¬´ì‘ìœ„</option>
  </select>
</div>
      </div>
    </div>

    <div class="row" style="margin-bottom:8px;justify-content:flex-end">
      <button class="btn" onclick="generateGroups()">ì¡°í¸ì„±</button>
      <button class="btn ghost" onclick="clearGroups()">ì´ˆê¸°í™”</button>
      <button class="btn ghost" onclick="shareGroups()">ê³µìœ </button>
    </div>

    <div id="groupsArea"></div>
  </section>

  <!-- 3) íƒ€ìˆ˜ ì…ë ¥ -->
  <section class="card" id="scoreSection">
    <div class="h2">3) íƒ€ìˆ˜ ì…ë ¥ (ì¡°ë³„ ìˆœì„œ)</div>
    <div id="scoreInputs" class="notice">ë¨¼ì € ì¡°í¸ì„±ì„ ì‹¤í–‰í•˜ì„¸ìš”.</div>
    <div style="margin-top:8px">
      <button class="btn" style="width:100%" onclick="saveScores()">íƒ€ìˆ˜ ì €ì¥ ë° ìˆœìœ„ ê³„ì‚°</button>
    </div>
  </section>

  <!-- 4) ìˆœìœ„í‘œ -->
  <section class="card" id="rankingSection">
    <div class="h2">4) ìˆœìœ„í‘œ</div>
    <div id="rankingArea"></div>

<div style="margin-top:8px;display:flex;gap:8px;justify-content:center">
      <button class="btn" onclick="applyLastHoleAndResort()">ìµœì¢…í™€ ì ìš©</button>
      <button class="btn ghost" onclick="copyRankingText()">ìˆœìœ„ ê³µìœ </button>
    </div>

  </section>

</div>

<script>
/* ================= storage keys ================= */
const KEY_CLUBS = 'pg_clubs_v1_5_final';
const KEY_GROUPS = 'pg_groups_v1_5_final';
const KEY_SCORES = 'pg_scores_v1_5_final';

let clubs = JSON.parse(localStorage.getItem(KEY_CLUBS) || '{}'); // {clubName: [{name, gender, checked}]}
let groupsByClub = JSON.parse(localStorage.getItem(KEY_GROUPS) || '{}'); // {clubName: [ [name,...], ... ]}
let scores = JSON.parse(localStorage.getItem(KEY_SCORES) || '{}'); // {clubName: {name: {total, lastHole}}}

let currentClub = Object.keys(clubs)[0] || '__default__';
if(!clubs[currentClub]) clubs[currentClub] = [];
let groups = groupsByClub[currentClub] || [];

function persistAll(){
  localStorage.setItem(KEY_CLUBS, JSON.stringify(clubs));
  localStorage.setItem(KEY_GROUPS, JSON.stringify(groupsByClub));
  localStorage.setItem(KEY_SCORES, JSON.stringify(scores));
}

/* ================= utilities ================= */
function escapeHTML(s){ return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/"/g,'&quot;'); }
function cssSafe(name){ 
  return 'x'+Array.from(name).map(c=>c.charCodeAt(0).toString(16)).join('_'); 
}

/* ================= club select UI ================= */
const clubSelect = document.getElementById('clubSelect');
const memberTbody = document.querySelector('#memberTable tbody');

function refreshClubSelect(){
  clubSelect.innerHTML = '';
  Object.keys(clubs).forEach(k=>{
    const opt = document.createElement('option'); opt.value=k; opt.textContent=k; clubSelect.appendChild(opt);
  });
  const optNew = document.createElement('option'); optNew.value='__new__'; optNew.textContent='-- ê·¸ë£¹ ì„ íƒ/ì¶”ê°€ --'; clubSelect.appendChild(optNew);
  clubSelect.value = currentClub && clubs[currentClub] ? currentClub : '__new__';
}

function onSelectClub(){
  const v = clubSelect.value;
  if(v === '__new__'){
    const name = prompt('ìƒˆ ê·¸ë£¹ëª… ì…ë ¥');
    if(!name) { clubSelect.value = currentClub; return; }
    if(!clubs[name]) clubs[name] = [];
    if(!groupsByClub[name]) groupsByClub[name] = [];
    groups = [];
    scores[name] = {};
    currentClub = name;
    persistAll();
    refreshClubSelect();
    loadClubMembers(currentClub);
    renderAll();
    return;
  }
  saveMembersToClub();
  currentClub = v;
groups = [];                 // ì¡°í¸ì„± ì´ˆê¸°í™”
groupsByClub[currentClub] = [];
scores[currentClub] = {};    // íƒ€ìˆ˜ / ìˆœìœ„ ì´ˆê¸°í™”  

loadClubMembers(currentClub);
  renderAll();
}

function openNewClub(){
  const name = prompt('ìƒˆ í´ëŸ½ëª…ì„ ì…ë ¥í•˜ì„¸ìš”');
  if(!name) return;
  if(!clubs[name]) clubs[name] = [];
  if(!groupsByClub[name]) groupsByClub[name] = [];
  scores[name] = {};        // âœ… íƒ€ìˆ˜/ìˆœìœ„ ì™„ì „ ì´ˆê¸°í™”
  groups = [];              // âœ… ì¡°í¸ì„± ì´ˆê¸°í™”
  currentClub = name;
  persistAll();
  refreshClubSelect();
  loadClubMembers(currentClub);
  renderAll();
  alert('í´ëŸ½ ì¶”ê°€: ' + name);
}

function deleteClub(){
  if(!currentClub || currentClub==='__new__') return alert('ì‚­ì œí•  í´ëŸ½ì„ ì„ íƒí•˜ì„¸ìš”');
  if(!confirm(currentClub + ' í´ëŸ½ì„ ì‚­ì œí•˜ë©´ ê´€ë ¨ ë°ì´í„°ê°€ ëª¨ë‘ ì‚­ì œë©ë‹ˆë‹¤. ê³„ì†í• ê¹Œìš”?')) return;
  delete clubs[currentClub];
  delete groupsByClub[currentClub];
  delete scores[currentClub];
  currentClub = Object.keys(clubs)[0] || '__default__';
  if(!clubs[currentClub]) clubs[currentClub] = [];
  groups = groupsByClub[currentClub] || [];
  persistAll();
  refreshClubSelect();
  loadClubMembers(currentClub);
  renderAll();
  alert('ì‚­ì œ ì™„ë£Œ');
}

function resetCurrentClub(){
  if(!currentClub || currentClub==='__new__') return alert('ì´ˆê¸°í™”í•  í´ëŸ½ì„ ì„ íƒí•˜ì„¸ìš”');
  if(!confirm(currentClub + ' í´ëŸ½ì˜ ë©¤ë²„/ì¡°/ì ìˆ˜ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆê¹Œ?')) return;
  clubs[currentClub] = [];
  groupsByClub[currentClub] = [];
  scores[currentClub] = {};
  groups = [];
  persistAll();
  loadClubMembers(currentClub);
  renderAll();
  alert('ì´ˆê¸°í™” ì™„ë£Œ');
}

/* ================= members ================= */
function loadClubMembers(name){
  const arr = clubs[name] || [];
  // normalize structure (support older formats)
  clubs[name] = arr.map(a => ({ name: a.name || a.n || '', gender: a.gender || a.g || 'ë‚¨', checked: !!a.checked }));
  drawMembers();
  updateCounts();
}

function saveMembersToClub(){
  if(!currentClub || currentClub==='__new__') return;
  const members = getMembersFromTable();
  clubs[currentClub] = members.map(m=>({name:m.name, gender:m.gender, checked:m.checked}));
  persistAll();
}

function getMembersFromTable(){
  const rows = memberTbody.querySelectorAll('tr');
  const res = [];
  rows.forEach(tr=>{
    const nameEl = tr.querySelector('input[data-name]');
    const genderEl = tr.querySelector('select[data-gender]');
    const chkEl = tr.querySelector('input[data-checked]');
    if(!nameEl) return;
    res.push({ name: nameEl.value.trim(), gender: genderEl.value, checked: chkEl.checked });
  });
  return res;
}

function drawMembers(){
  memberTbody.innerHTML = '';
  const arr = clubs[currentClub] || [];
  arr.forEach((m,i)=>{
    const tr = document.createElement('tr');
    // show gender text before the dropdown, per request
    tr.innerHTML = `
      <td class="checkbox-cell"><input data-checked type="checkbox" ${m.checked?'checked':''} onchange="onMemberChecked(${i}, this.checked)"></td>
      <td class="name-cell"><input data-name class="name-input" value="${escapeHTML(m.name)}" onchange="onMemberRename(${i}, this.value)"></td>
      <td class="gender-cell">
        <select data-gender onchange="onMemberGender(${i}, this.value)">


          <option value="ë‚¨" ${m.gender==='ë‚¨'?'selected':''}>ë‚¨</option>
          <option value="ì—¬" ${m.gender==='ì—¬'?'selected':''}>ì—¬</option>
        </select>
      </td>
      <td class="action-cell"><button class="btn small ghost" onclick="deleteMember(${i})">ì‚­ì œ</button></td>
    `;
    memberTbody.appendChild(tr);
  });
  updateCounts();
}

function onMemberChecked(i,val){ clubs[currentClub][i].checked = val; persistAll(); updateCounts(); }
function onMemberRename(i,val){ if(!val.trim()) return alert('ì´ë¦„ì„ ë¹„ì›Œë‘˜ ìˆ˜ ì—†ìŠµë‹ˆë‹¤'); clubs[currentClub][i].name = val.trim(); persistAll(); drawGroups(); drawScoreInputs(); renderRanks(); }
function onMemberGender(i,val){ clubs[currentClub][i].gender = val; persistAll(); drawGroups(); drawScoreInputs(); renderRanks(); }
function deleteMember(i){ if(!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return; const name = clubs[currentClub][i].name; clubs[currentClub].splice(i,1); if(scores[currentClub] && scores[currentClub][name]) delete scores[currentClub][name]; persistAll(); drawMembers(); drawGroups(); drawScoreInputs(); updateCounts(); }

function toggleSelectAll(checked){ (clubs[currentClub]||[]).forEach(m=>m.checked = checked); persistAll(); drawMembers(); updateCounts(); }
function deleteSelected(){ if(!confirm('ì„ íƒí•œ íšŒì›ì„ ëª¨ë‘ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return; clubs[currentClub] = (clubs[currentClub]||[]).filter(m=>!m.checked); persistAll(); drawMembers(); drawGroups(); drawScoreInputs(); updateCounts(); }

document.getElementById('inputName').addEventListener('keydown', (e)=>{ if(e.key==='Enter') addMember(); });
function addMember(){
  const name = document.getElementById('inputName').value.trim();
  const gender = document.getElementById('inputGender').value;
  if(!name) return alert('ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”');
  if((clubs[currentClub]||[]).some(m=>m.name === name)) return alert('ê°™ì€ ì´ë¦„ì´ ì¡´ì¬í•©ë‹ˆë‹¤.');
  clubs[currentClub].push({ name, gender, checked:false });
  persistAll();
  document.getElementById('inputName').value = '';
  drawMembers();
  updateCounts();
}

/* ================= grouping (rules per request) ================= */
/* computeGroupSizes(N,S) -> returns sizes array or null */
function computeGroupSizes(N,S){
  for(let g=1; g<=N; g++){
    const a = N - g*(S-1);
    if(a>=0 && a<=g){
      const sizes = [];
      for(let i=0;i<g;i++) sizes.push(i<a?S:(S-1));
      return sizes;
    }
  }
  return null;
}
function shuffleArray(arr){
  for(let i=arr.length-1;i>0;i--){ const j = Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; }
}

/* generateGroups ... (unchanged) */
function generateGroups(){
  const selected = (clubs[currentClub] || []).filter(m=>m.checked);
  const N = selected.length;
  if(N===0) return alert('ì¡°í¸ì„± ëŒ€ìƒ(ì„ íƒëœ íšŒì›)ì´ ì—†ìŠµë‹ˆë‹¤.');
  const S = Math.max(1, Number(document.getElementById('groupSize').value) || 4);
  const mode = document.getElementById('mode').value;
  const sizes = computeGroupSizes(N, S);
  if(!sizes) return alert('ì¡°í¸ì„± ë¶ˆê°€: ì„ íƒ ì¸ì› ' + N + 'ëª…ì€ ì¡°ë³„ì¸ì› ê·œì¹™ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
  const G = sizes.length;
  const pool = selected.slice();
  shuffleArray(pool);

  if(mode === 'byGender'){
    let males = pool.filter(p=>p.gender==='ë‚¨').slice();
    let females = pool.filter(p=>p.gender==='ì—¬').slice();
    const maleSizes = computeGroupSizes(males.length, S);
    const femaleSizes = computeGroupSizes(females.length, S);
    if(!maleSizes || !femaleSizes) return alert('ì„±ë³„ë¡œ ë”°ë¡œ í¸ì„± ë¶ˆê°€: ë‚¨ì ë˜ëŠ” ì—¬ì ì¸ì›ì´ ê·œì¹™ì„ ë§Œì¡±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    const newGroups = [];
    maleSizes.forEach(sz => newGroups.push(males.splice(0, sz).map(x=>x.name)));
    femaleSizes.forEach(sz => newGroups.push(females.splice(0, sz).map(x=>x.name)));
    groups = newGroups.map(g=>g.slice());
  } else if(mode === 'mixed'){
    const caps = sizes.slice();
    const groupsArr = Array.from({length:caps.length}, ()=>[]);
    const females = pool.filter(p=>p.gender==='ì—¬').slice();
    const males = pool.filter(p=>p.gender==='ë‚¨').slice();
    let gi = 0;
    females.forEach(f=>{
      let tries = 0;
      while(caps[gi] <= 0 && tries < caps.length){ gi = (gi+1)%caps.length; tries++; }
      if(caps[gi] > 0){ groupsArr[gi].push(f.name); caps[gi]--; gi = (gi+1)%caps.length; }
      else { for(let j=0;j<caps.length;j++) if(caps[j]>0){ groupsArr[j].push(f.name); caps[j]--; break; } }
    });
    let mIdx = 0;
    for(let j=0;j<caps.length;j++){
      while(caps[j] > 0 && mIdx < males.length){
        groupsArr[j].push(males[mIdx].name); mIdx++; caps[j]--;
      }
    }
    while(mIdx < males.length){
      let placed = false;
      for(let j=0;j<groupsArr.length;j++){
        if(groupsArr[j].length < sizes[j]){ groupsArr[j].push(males[mIdx].name); mIdx++; placed = true; break; }
      }
      if(!placed) break;
    }
    groups = groupsArr.map(g=>g.slice());
  } else {
    const groupsArr = [];
    let idx = 0;
    for(let gi=0; gi<sizes.length; gi++){
      groupsArr[gi] = pool.slice(idx, idx+sizes[gi]).map(p=>p.name);
      idx += sizes[gi];
    }
    groups = groupsArr.map(g=>g.slice());
  }

  groupsByClub[currentClub] = groups.slice();
  scores[currentClub] = {};
  persistAll();
  drawGroups();
  drawScoreInputs();
  renderRanks();
}

function drawGroups(){
  const area = document.getElementById('groupsArea');
  area.innerHTML = '';
  if(!groups || groups.length === 0){ area.innerHTML = '<div class="notice">í¸ì„±ëœ ì¡°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>'; return; }
  groups.forEach((g, gi)=>{
    const div = document.createElement('div'); div.className = 'group-box';
    let inner = `<div style="font-weight:700">${gi+1}ì¡° (ì¸ì›:${g.length})</div><ul style="text-align:left;padding-left:18px;margin:6px 0">`;
    g.forEach(n => {
      const mem = (clubs[currentClub] || []).find(m => m.name === n) || {gender:'-'};
      inner += `<li>${escapeHTML(n)} <small style="color:var(--muted)">(${mem.gender})</small></li>`;
    });
    inner += '</ul>';
    div.innerHTML = inner;
    area.appendChild(div);
  });
}

function clearGroups(){
  if(!confirm('í¸ì„± ì´ˆê¸°í™”: ì¡°í¸ì„±, íƒ€ìˆ˜ ì…ë ¥, ìˆœìœ„í‘œë¥¼ ëª¨ë‘ ì´ˆê¸°í™”í•©ë‹ˆë‹¤. ê³„ì†í• ê¹Œìš”?')) return;
  groups = [];
  groupsByClub[currentClub] = [];
  scores[currentClub] = scores[currentClub] || {};
  persistAll();
  drawGroups();
  drawScoreInputs();
  renderRanks();
}

/* ================= score inputs (total) ================= */
function drawScoreInputs(){
  const el = document.getElementById('scoreInputs'); el.innerHTML = '';
  if(!groups || groups.length === 0){ el.innerHTML = '<div class="notice">ë¨¼ì € ì¡°í¸ì„±ì„ ì‹¤í–‰í•˜ì„¸ìš”.</div>'; return; }
  if(!scores[currentClub]) scores[currentClub] = {};
  groups.forEach((g, gi) => {
    const box = document.createElement('div'); box.className = 'group-box';
    let inner = `<div style="font-weight:700">${gi+1}ì¡°</div>`;
    g.forEach(name => {
      const mem = (clubs[currentClub] || []).find(m => m.name === name) || {gender:'-'};
      const totalVal = (scores[currentClub] && scores[currentClub][name] && scores[currentClub][name].total != null) ? scores[currentClub][name].total : '';
      inner += `<div style="display:flex;gap:8px;align-items:center;margin-top:8px"><div style="flex:1">${escapeHTML(name)} <small style="color:var(--muted)">(${mem.gender})</small></div><input id="inp_total_${cssSafe(name)}" type="number" placeholder="ì´íƒ€ìˆ˜" value="${totalVal}" style="width:120px"/></div>`;
    });
    box.innerHTML = inner;
    el.appendChild(box);
  });
}

/* fix saveScores: explicitly ensure scores[currentClub] exists and only parse numeric values */
function saveScores(){
  if(!scores[currentClub]) scores[currentClub] = {};
  const inGroup = new Set(groups.flat());
  groups.flat().forEach(name=>{
    const el = document.getElementById('inp_total_'+cssSafe(name));
    if(el){
      const raw = (el.value||'').toString().trim();
      scores[currentClub][name] = scores[currentClub][name] || {};
      if(raw !== ''){
        const v = Number(raw);
        if(!Number.isNaN(v)){
          scores[currentClub][name].total = v;
        } else {
          scores[currentClub][name].total = null;
        }
      } else {
        scores[currentClub][name].total = null;
      }
    }
  });
  // remove scores not in group
  Object.keys(scores[currentClub] || {}).forEach(k => { if(!inGroup.has(k)) delete scores[currentClub][k]; });
  persistAll();
  renderRanks();
  alert('íƒ€ìˆ˜ ì €ì¥ ì™„ë£Œ');
}

/* ================= ranking logic (total asc, then lastHole asc) ================= */
function renderRanks(){
  const area = document.getElementById('rankingArea'); area.innerHTML = '';
  if(!groups || groups.length === 0) return area.innerHTML = '<div class="notice">ì¡°í¸ì„±ì´ í•„ìš”í•©ë‹ˆë‹¤.</div>';

// âœ… íƒ€ìˆ˜ ì…ë ¥ ì „ì—ëŠ” ìˆœìœ„í‘œ ìˆ¨ê¹€
if(
  !scores[currentClub] ||
  Object.values(scores[currentClub]).every(
    s => s.total == null || s.total === ''
  )
){
  return area.innerHTML =
    '<div class="notice">íƒ€ìˆ˜ ì…ë ¥ í›„ ìˆœìœ„í‘œê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>';
}

  const players = groups.flat().map(name => {
    const mem = (clubs[currentClub] || []).find(m => m.name === name);
    const sc = (scores[currentClub] && scores[currentClub][name]) || {};
    return { name, gender: mem ? mem.gender : '-', total: sc.total != null ? Number(sc.total) : null, lastHole: sc.lastHole != null ? Number(sc.lastHole) : null };
  });

  function cmp(a,b){
    const at = a.total == null ? Infinity : a.total;
    const bt = b.total == null ? Infinity : b.total;
    if(at !== bt) return at - bt;
    const al = a.lastHole == null ? Infinity : a.lastHole;
    const bl = b.lastHole == null ? Infinity : b.lastHole;
    if(al !== bl) return al - bl;
    return a.name.localeCompare(b.name,'ko');
  }

  const allSorted = players.slice().sort(cmp);
  const menSorted = allSorted.filter(p=>p.gender === 'ë‚¨');
  const womenSorted = allSorted.filter(p=>p.gender === 'ì—¬');

function assignRanks(list){
  const ranks = {};
  let prev = null;
  let rank = 0;
  let displayRank = 0;

  list.forEach(p=>{
    // âœ… ì´íƒ€ìˆ˜ê°€ ì—†ìœ¼ë©´ ìˆœìœ„ë„ ê³µë€
    if(p.total == null){
      ranks[p.name] = '';
      return;
    }

    rank++;
    const key = p.total + '|' + (p.lastHole == null ? '' : p.lastHole);
    if(prev !== key){
      displayRank = rank;
      prev = key;
    }
    ranks[p.name] = displayRank;
  });
  return ranks;
}

  const overallRanks = assignRanks(allSorted);
  const maleRanks = assignRanks(menSorted);
  const femaleRanks = assignRanks(womenSorted);

  let html = '<div style="overflow:auto">';
  html += '<h3 style="margin-bottom:6px">â–¶ ë‚¨ìë¶€</h3><table><thead><tr><th>ìˆœìœ„</th><th>ì´ë¦„</th><th>ì´íƒ€ìˆ˜</th><th>í†µí•©ìˆœìœ„</th></tr></thead><tbody>';
  menSorted.forEach(p=>{ const t = p.total==null ? '' : p.total; html += `<tr><td>${maleRanks[p.name]}</td><td>${escapeHTML(p.name)}</td><td>${t}</td><td>${overallRanks[p.name]}</td></tr>`; });
  html += '</tbody></table>';

  html += '<h3 style="margin-top:10px;margin-bottom:6px">â–¶ ì—¬ìë¶€</h3><table><thead><tr><th>ìˆœìœ„</th><th>ì´ë¦„</th><th>ì´íƒ€ìˆ˜</th><th>í†µí•©ìˆœìœ„</th></tr></thead><tbody>';
  womenSorted.forEach(p=>{ const t = p.total==null ? '' : p.total; html += `<tr><td>${femaleRanks[p.name]}</td><td>${escapeHTML(p.name)}</td><td>${t}</td><td>${overallRanks[p.name]}</td></tr>`; });
  html += '</tbody></table>';

  html += '<h3 style="margin-top:10px;margin-bottom:6px">â–¶ ë‚¨ë…€ í†µí•©</h3><table><thead><tr><th>ìˆœìœ„</th><th>ì´ë¦„</th><th>ì´íƒ€ìˆ˜</th><th>ìµœì¢…í™€</th></tr></thead><tbody>';
  allSorted.forEach(p=>{
    const t = p.total==null ? '' : p.total;
    const l = p.lastHole==null ? '' : p.lastHole;
    html += `<tr><td>${overallRanks[p.name]}</td><td style="text-align:left;padding-left:8px">${escapeHTML(p.name)} <small style="color:var(--muted)">(${p.gender})</small></td><td>${t}</td><td><input type="number" data-last="${encodeURIComponent(p.name)}" value="${l}" style="width:84px"/></td></tr>`;
  });
  html += '</tbody></table></div>';
  // removed inner "ìµœì¢…í™€ ì €ì¥" button as requested (we keep header-level apply button)
  area.innerHTML = html;
}

/* save lastHole inputs & re-render (lastHole used as tiebreaker when sorting) */
function applyLastHoleInputs(){
  if(!scores[currentClub]) scores[currentClub] = {};
  const inputs = document.querySelectorAll('#rankingArea input[data-last]');
  inputs.forEach(inp=>{
    const name = decodeURIComponent(inp.getAttribute('data-last'));
    const v = inp.value.trim();
    scores[currentClub][name] = scores[currentClub][name] || {};
    scores[currentClub][name].lastHole = v !== '' ? Number(v) : null;
  });
  persistAll();
  alert('ìµœì¢…í™€ ì €ì¥ ì™„ë£Œ');
  renderRanks();
}
function applyLastHoleAndResort(){ applyLastHoleInputs(); }

/* ================= sharing ================= */
function shareGroups(){
  if(!groups || groups.length === 0) return alert('ê³µìœ í•  ì¡°í¸ì„± ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.');
  let text = '[ì¡°í¸ì„± ê²°ê³¼]\\n';
  groups.forEach((g,i)=> {
    text += `${i+1}ì¡°: ` + g.map(n => {
      const mem = (clubs[currentClub]||[]).find(m=>m.name===n);
      return `${n}(${mem?mem.gender:''})`;
    }).join(', ') + '\\n';
  });
  if(navigator.share){
    navigator.share({ title: 'ì¡°í¸ì„± ê²°ê³¼', text }).catch(()=> {
      navigator.clipboard.writeText(text).then(()=> alert('ê³µìœ  ì‹¤íŒ¨ â€” í´ë¦½ë³´ë“œì— ë³µì‚¬ë¨'));
    });
  } else {
    navigator.clipboard.writeText(text).then(()=> alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë¨ â€” ì›í•˜ëŠ” ì•±ì— ë¶™ì—¬ë„£ê¸°'));
  }
}

/* ================= CSV / copy ================= */

function copyRankingText(){
  if(!groups || groups.length===0) return alert('ìˆœìœ„í‘œê°€ ì—†ìŠµë‹ˆë‹¤.');
  
  // ì •ë ¬ í•¨ìˆ˜ (ì´íƒ€ìˆ˜ -> ìµœì¢…í™€ -> ì´ë¦„ ìˆœ)
  function sortPlayers(players){
    return players.sort((a,b)=>{
      const at = a.total == null ? Infinity : a.total;
      const bt = b.total == null ? Infinity : b.total;
      if(at !== bt) return at - bt;
      const al = a.lastHole == null ? Infinity : a.lastHole;
      const bl = b.lastHole == null ? Infinity : b.lastHole;
      if(al !== bl) return al - bl;
      return a.name.localeCompare(b.name,'ko');
    });
  }
  
  // ë™ì ì ì²˜ë¦¬ ìˆœìœ„ ë¶€ì—¬ í•¨ìˆ˜
  function assignRank(list){
    const ranked = [];
    let prev = null;
    let rank = 0;
    let displayRank = 0;
    
    list.forEach(p=>{
      rank++;
      const key = p.total + '|' + (p.lastHole == null ? '' : p.lastHole);
      if(prev !== key){
        displayRank = rank;
        prev = key;
      }
      ranked.push({...p, rank: displayRank});
    });
    return ranked;
  }
  
  let text = '[ìˆœìœ„í‘œ ê²°ê³¼]\n\n';
  
  // ì „ì²´ í”Œë ˆì´ì–´ ë°ì´í„° ìˆ˜ì§‘
  const allPlayers = groups.flat().map(n=>{
    const mem = (clubs[currentClub]||[]).find(m=>m.name===n);
    const sc = (scores[currentClub] && scores[currentClub][n]) || {};
    return {
      name: n,
      gender: mem ? mem.gender : '-',
      total: sc.total != null ? Number(sc.total) : null,
      lastHole: sc.lastHole != null ? Number(sc.lastHole) : null
    };
  }).filter(p=>p.total!=null);
  
  // ë‚¨ìë¶€
  const men = allPlayers.filter(p=>p.gender==='ë‚¨');
  const menSorted = sortPlayers(men.slice());
  const menRanked = assignRank(menSorted);
  
  if(menRanked.length > 0){
    text += 'â–¶ ë‚¨ìë¶€\n';
    menRanked.forEach(p=>{
      const lastHoleText = p.lastHole != null ? `, ìµœì¢…í™€:${p.lastHole}` : '';
      text += `${p.rank}ìœ„: ${p.name} (${p.total}íƒ€${lastHoleText})\n`;
    });
    text += '\n';
  }
  
  // ì—¬ìë¶€
  const women = allPlayers.filter(p=>p.gender==='ì—¬');
  const womenSorted = sortPlayers(women.slice());
  const womenRanked = assignRank(womenSorted);
  
  if(womenRanked.length > 0){
    text += 'â–¶ ì—¬ìë¶€\n';
    womenRanked.forEach(p=>{
      const lastHoleText = p.lastHole != null ? `, ìµœì¢…í™€:${p.lastHole}` : '';
      text += `${p.rank}ìœ„: ${p.name} (${p.total}íƒ€${lastHoleText})\n`;
    });
    text += '\n';
  }
  
  // í†µí•©
  const allSorted = sortPlayers(allPlayers.slice());
  const allRanked = assignRank(allSorted);
  
  if(allRanked.length > 0){
    text += 'â–¶ ë‚¨ë…€ í†µí•©\n';
    allRanked.forEach(p=>{
      const lastHoleText = p.lastHole != null ? `, ìµœì¢…í™€:${p.lastHole}` : '';
      text += `${p.rank}ìœ„: ${p.name} (${p.gender}) (${p.total}íƒ€${lastHoleText})\n`;
    });
  }
  
  if(navigator.share){
    navigator.share({ title: 'ìˆœìœ„í‘œ ê²°ê³¼', text }).catch(()=>{
      navigator.clipboard.writeText(text).then(()=>alert('ê³µìœ  ì‹¤íŒ¨ â€” í´ë¦½ë³´ë“œì— ë³µì‚¬ë¨'));
    });
  } else {
    navigator.clipboard.writeText(text).then(()=>alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë¨ â€” ì›í•˜ëŠ” ì•±ì— ë¶™ì—¬ë„£ê¸°'));
  }
}

/* ================= helper: render all ================= */
function renderAll(){ drawMembers(); drawGroups(); drawScoreInputs(); renderRanks(); updateCounts(); }
function loadClubInitial(){
  refreshClubSelect();
  if(!clubs[currentClub]) clubs[currentClub] = [];
  if(!groupsByClub[currentClub]) groupsByClub[currentClub] = [];
  if(!scores[currentClub]) scores[currentClub] = {};
  groups = groupsByClub[currentClub] || [];
  drawMembers();
  drawGroups();
  drawScoreInputs();
  renderRanks();
  updateCounts();
}

function updateCounts(){
  const arr = clubs[currentClub] || [];
  const total = arr.length;
  const male = arr.filter(x=>x.gender==='ë‚¨').length;
  const female = arr.filter(x=>x.gender==='ì—¬').length;
  document.getElementById('totalCount').innerText = total;
  document.getElementById('maleCount').innerText = male;
  document.getElementById('femaleCount').innerText = female;
const checkedMembers = arr.filter(x=>x.checked);

const checked = checkedMembers.length;
const maleChecked = checkedMembers.filter(x=>x.gender === 'ë‚¨').length;
const femaleChecked = checkedMembers.filter(x=>x.gender === 'ì—¬').length;

document.getElementById('selCount').innerText = checked;
document.getElementById('selMale').innerText = maleChecked;
document.getElementById('selFemale').innerText = femaleChecked;

document.getElementById('selectAll').checked =
  (arr.length > 0 && checked === arr.length);
}

refreshClubSelect();
loadClubInitial();

/* Ensure saveMembersToClub is called before unload */
window.addEventListener('beforeunload', ()=>{ saveMembersToClub(); persistAll(); });

</script>

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("./service-worker.js");
}
</script>

<script>
let deferredPrompt;
const installBtn = document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt", e => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "block";
});

installBtn.addEventListener("click", async () => {
  installBtn.style.display = "none";
  deferredPrompt.prompt();
  await deferredPrompt.userChoice;
  deferredPrompt = null;
});
</script>

<script>
if (window.matchMedia('(display-mode: standalone)').matches) {
  const btn = document.getElementById("installBtn");
  if (btn) btn.style.display = "none";
}
</script>

<button id="installBtn" style="
  display:none;
  position:fixed;
  bottom:20px;
  right:20px;
  padding:14px 20px;
  font-size:18px;
  border:none;
  border-radius:12px;
  background:#2e7d32;
  color:white;
  z-index:9999;
">
ğŸ“² ì•± ì„¤ì¹˜
</button>

</body>
</html>





